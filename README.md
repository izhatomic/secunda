Дисклеймер. При написании кода и организации проекта делались некоторые допущения, обусловленные тестовой природой задачи:
- Организация файлов в проекте не продумывалась.
- В нормальной ситуации переменные для запуска (особенно чувствительные переменные) не фигурируют в коде и подгружаются во время деплоя или в окружение, либо в файл для дальнейшего считывания.
- Детали реализации того или иного функционала могут сильно отличаться в зависимости от уже существующей кодовой базы и требований бизнеса.
- Не прорабатывались детали версионирования и логгирования приложения.

## Инструкции по использованию:

Для локального теста можно запустить контейнер с БД в докере:
```bash
sudo docker run --rm --name pg_secunda -p 5432:5432 -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=secunda -e PGDATA=/var/lib/postgresql/data/pgdata -d -v /home/user/PG_secunda:/var/lib/postgresql/data postgres:17
```
пути для монтирования дисков нужно указать свои, либо можно вообще не монтировать, если не планируется сохранять состояние базы между ее перезапусками.

Далее подготовьте БД к работе. Ссылка для подключения к БД должна быть в переменных окружения и называться DATABASE_URL, например:
**DATABASE_URL='postgresql+asyncpg://postgres:postgres@1.1.1.1:5432/secunda'**

1. **Установите зависимости:**
   ```bash
   pip install -r requirements.txt
   ```

2. **Настройте переменные окружения в `.env`**

3. **Инициализируйте БД**
   ```bash
   python init_db.py 
   ```

4. **Инициализируйте Alembic:**
   При необходимости отредактируйте **alembic.ini**, затем выполните инициализацию:
   ```bash
   alembic init alembic
   ```
   Скопируйте **env.py** в созданную папку.

5. **Создайте первую миграцию:**
   ```bash
   python migrate_commands.py create "Initial migration"
   ```

6. **Примените миграции:**
   ```bash
   python migrate_commands.py upgrade
   ```

7. **Заполните базу тестовыми данными:**
   ```bash
   python seed_data.py
   ```
   
Далее необходимо собрать контейнер с приложением:
```bash
sudo docker build --build-arg ARG_DATABASE_URL=$DATABASE_URL -t secunda -f Dockerfile .
```
где $DATABASE_URL содержит парамтры подключения к БД PostgreSQL.

и запустить его:
```bash
sudo docker run -it -d -p 8000:8000 --rm --name secunda secunda
```

После чего приложение будет доступно для обращений по API на **localhost:8000** , а также будет доступна документация на **localhost:8000/redoc** 
